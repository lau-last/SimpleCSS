var w=class{static addEventToDocument(t,e){this.verifyListener(t,e)||(this.listeners.has(t)||(this.listeners.set(t,new Set),document.addEventListener(t,n=>this.dispatch(t,n))),this.pushListener(t,e))}static verifyListener(t,e){let n=this.listeners.get(t);return n?n.has(e):!1}static pushListener(t,e){this.listeners.has(t)||this.listeners.set(t,new Set),this.listeners.get(t).add(e)}static dispatch(t,e){let n=this.listeners.get(t);if(n)for(let a of n)try{a(e)}catch(s){console.error(`[EventManager] Error in handler "${t}":`,s)}}};w.listeners=new Map;var c=w;var f=class r{constructor(){r.setupDelegation()}static setupDelegation(){r.registerExistingTriggers(),r.observeNewAjaxTriggers()}static registerExistingTriggers(t=document){t instanceof HTMLElement&&t.hasAttribute("data-ajax-trigger")&&r.ensureListenersFor(t.getAttribute("data-ajax-trigger"));let e=t.querySelectorAll("[data-ajax-trigger]");for(let n of e)r.ensureListenersFor(n.getAttribute("data-ajax-trigger"))}static observeNewAjaxTriggers(){new MutationObserver(e=>{for(let n of e)n.addedNodes.forEach(a=>{a instanceof HTMLElement&&r.registerExistingTriggers(a)})}).observe(document.body,{childList:!0,subtree:!0})}static shouldPreventDefault(t,e){return t==="submit"||t==="click"&&e.tagName==="A"}static createContext(t){let e=r.resolveAjaxUrl(t);if(!e?.url||!e?.method)return null;let n=r.resolveAjaxTarget(t),a=r.resolveAjaxSwap(t),s=r.buildFormData(t),o=r.resolveAjaxSelect(t);return{element:t,url:e.url,method:e.method,targetSelector:n,swapMode:a,formData:s,selectSelector:o}}static performAjax(t){return r.sendRequest(t.url,t.method,t.formData,t.element)}static onEvent(t){let e=t.target;if(!(e instanceof Element))return;let n=t.type,a=`[data-ajax-trigger="${n}"]`,s=e.closest(a);if(!s)return;r.shouldPreventDefault(n,s)&&t.preventDefault();let o=r.createContext(s);if(!o){console.warn("No AJAX URL/method resolved for:",s);return}r.emitEvent(s,"data-ajax:before-request",o),r.handleAjaxEvents(s,"data-ajax-event-before",o),r.performAjax(o).then(l=>{r.emitEvent(s,"data-ajax:on-success",o),r.handleAjaxEvents(s,"data-ajax-event-success",o);let i=r.getTargetElement(o.targetSelector,s),u=r.extractSelectedHtml(l,o.selectSelector);r.applySwap(i,u,o.swapMode)}).catch(()=>{r.emitEvent(s,"data-ajax:on-error",o),r.handleAjaxEvents(s,"data-ajax-event-error",o),console.error("AJAX error:",s);let l=r.getTargetElement(o.targetSelector,s);r.applySwap(l,'<p style="color:red;">Error while loading.</p>',o.swapMode)}).finally(()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{r.emitEvent(s,"data-ajax:after-request",o),r.handleAjaxEvents(s,"data-ajax-event-after",o)})})})}static ensureListenersFor(t){t&&(t.includes(" ")||c.addEventToDocument(t,r.onEvent))}static resolveAjaxSwap(t){let e=t.getAttribute("data-ajax-swap");return e||"innerHTML"}static resolveAjaxPost(t){var e;return((e=t.closest("[data-ajax-post]"))===null||e===void 0?void 0:e.getAttribute("data-ajax-post"))||null}static resolveAjaxGet(t){var e;return((e=t.closest("[data-ajax-get]"))===null||e===void 0?void 0:e.getAttribute("data-ajax-get"))||null}static resolveAjaxUrl(t){let e=r.resolveAjaxPost(t),n=r.resolveAjaxGet(t);return!e&&!n?(console.warn("No data-ajax-post or data-ajax-get found for:",t),null):{url:e||n,method:e?"POST":"GET"}}static resolveAjaxTarget(t){var e;let n=(e=t.closest("[data-ajax-target]"))===null||e===void 0?void 0:e.getAttribute("data-ajax-target");return n||console.warn("No data-ajax-target defined for:",t),n||null}static resolveAjaxSelect(t){var e;return((e=t.closest("[data-ajax-select]"))===null||e===void 0?void 0:e.getAttribute("data-ajax-select"))||null}static resolveAjaxValue(t){var e;return((e=t.closest("[data-ajax-value]"))===null||e===void 0?void 0:e.getAttribute("data-ajax-value"))||null}static extractSelectedHtml(t,e){if(!e)return t;try{let a=new DOMParser().parseFromString(t,"text/html").querySelector(e);return a?a.innerHTML:t}catch{return t}}static getTargetElement(t,e){if(t){let n=document.querySelector(t);if(n)return n;console.warn("Target not found for selector:",t,"\u2014 using source element instead.")}return e}static applySwap(t,e,n){switch(String(n||"innerHTML").toLowerCase()){case"inner":case"innerhtml":t.innerHTML=e;break;case"outer":case"outerhtml":case"replace":t.outerHTML=e;break;default:console.warn("Unknown swap mode:",n,"\u2014 falling back to innerHTML."),t.innerHTML=e}}static buildFormData(t){var e;let n=t.tagName==="FORM"?t:t.closest("form");if(n)return new FormData(n);let a=new FormData,s=t;return s.name&&a.append(s.name,(e=s.value)!==null&&e!==void 0?e:""),a}static buildRequestOptions(t){return{method:String(t||"GET").toUpperCase(),headers:{"X-Requested-With":"XMLHttpRequest",Accept:"text/html"}}}static prepareRequest(t,e,n,a){let s=r.buildRequestOptions(t),o=e,l=r.resolveAjaxValue(a);if(l)try{let i=JSON.parse(l.replace(/'/g,'"'));for(let[u,d]of Object.entries(i))n.append(u,d)}catch{}if(t==="GET"){let i=new URLSearchParams;for(let[u,d]of n.entries())i.append(u,d);o+=(o.includes("?")?"&":"?")+i.toString()}else s.body=n;return{finalUrl:o,options:s}}static sendRequest(t,e,n,a){let{finalUrl:s,options:o}=r.prepareRequest(e,t,n,a);return fetch(s,o).then(l=>{if(!l.ok)throw new Error("Server error: "+l.status);return l.text()})}static emitEvent(t,e,n={}){t.dispatchEvent(new CustomEvent(e,{detail:{...n},bubbles:!0}))}static handleAjaxEvents(t,e,n={}){var a;let s=t.hasAttribute(e)?t:(a=t.closest)===null||a===void 0?void 0:a.call(t,`[${e}]`);if(!s)return;let o=s.getAttribute(e);if(!o)return;let l=o.split(";").map(i=>i.trim()).filter(Boolean);for(let i of l)try{let u=window[i];typeof u=="function"?u(n,s):new Function("context","element",i)(n,s)}catch(u){console.error(`Error in ${e} -> "${i}"`,u)}}};var m=class r{constructor(){r.init()}static init(){c.addEventToDocument("animationend",r.onAnimationEnd),c.addEventToDocument("click",r.onClick)}static onAnimationEnd(t){let e=t.target;e&&e.matches('[data-js="alert"]')&&e.remove()}static onClick(t){if(!(t instanceof MouseEvent))return;let e=t.target;if(!e||!e.matches(".close"))return;let n=e.closest('[data-js="alert"]');n&&n.remove()}};var h=class r{constructor(){r.init()}static init(){c.addEventToDocument("click",r.onClick)}static onClick(t){if(!(t instanceof MouseEvent))return;let e=t.target;e&&(r.handleClose(e),r.handleOpen(e))}static handleOpen(t){let e=t.closest('[data-js="aside"][data-target]');if(!e)return;let n=e.getAttribute("data-target");if(!n)return;let a=document.querySelector(n);a&&(r.isOpen(a)?r.hide(a):r.show(a))}static handleClose(t){if(!t.matches(".close"))return;let e=t.closest("aside, .sidebar");e&&r.isOpen(e)&&r.hide(e)}static isOpen(t){return t.classList.contains("show")}static show(t){t.classList.add("show"),r.openTransition(t);let e=r.getButtonForAside(t);e&&e.setAttribute("aria-expanded","true")}static hide(t){t.classList.remove("show"),r.closeTransition(t);let e=r.getButtonForAside(t);e&&e.setAttribute("aria-expanded","false")}static getButtonForAside(t){let e=t.id;return e?document.querySelector(`[data-js="aside"][data-target="#${e}"]`):null}static openTransition(t){if(!t.classList.contains("shrink-left")&&!t.classList.contains("shrink-right"))return;let e=n=>{if(n.propertyName!=="width")return;let s=r.getAnimationDurationVar("--fade-switch-duration")/2;t.querySelectorAll(".side-item").forEach(l=>{let i=l,u=i.querySelector(".side-icon"),d=i.querySelector(".side-text");r.restartAnimation(u,"fade-icon"),d&&(d.classList.remove("fade-text-in","fade-text-out"),r.restartAnimation(d,"fade-text-in")),setTimeout(()=>{i.classList.add("is-full")},s)})};t.addEventListener("transitionstart",e,{once:!0})}static closeTransition(t){if(!t.classList.contains("shrink-left")&&!t.classList.contains("shrink-right"))return;let e=n=>{if(n.propertyName!=="width")return;let s=r.getAnimationDurationVar("--fade-switch-duration")/2;t.querySelectorAll(".side-item").forEach(l=>{let i=l,u=i.querySelector(".side-icon"),d=i.querySelector(".side-text");r.restartAnimation(u,"fade-icon"),d&&(d.classList.remove("fade-text-in","fade-text-out"),r.restartAnimation(d,"fade-text-out")),setTimeout(()=>{i.classList.remove("is-full")},s)})};t.addEventListener("transitionstart",e,{once:!0})}static restartAnimation(t,e){t&&(t.classList.remove(e),t.offsetWidth,t.classList.add(e))}static getAnimationDurationVar(t){let e=getComputedStyle(document.documentElement).getPropertyValue(t).trim();return e.endsWith("ms")?parseFloat(e):e.endsWith("s")?parseFloat(e)*1e3:0}};var g=class r{constructor(){r.init()}static init(){c.addEventToDocument("click",r.onClick)}static onClick(t){if(!(t instanceof MouseEvent))return;let e=t.target;if(!e)return;let n=e.closest('[data-js="collapse"][data-target]');n&&r.handleToggle(n)}static handleToggle(t){let e=t.getAttribute("data-target");if(!e)return;let n=document.querySelector(e);n&&r.toggle(n,t)}static toggle(t,e){if(r.isAnimating(t))return;let n=t.closest(".accordion");n&&r.handleTypeAccordion(n,t),t.classList.contains("show")?r.close(t,e):r.open(t,e)}static handleTypeAccordion(t,e){if(!t)return;t.getAttribute("data-type")!=="multiple"&&r.closeAllCollapses(t,e)}static closeAllCollapses(t,e){t.querySelectorAll(".accordion-body.show").forEach(a=>{if(a===e)return;let s=r.getButton(t,a);s&&r.close(a,s)})}static isAnimating(t){return t.dataset.animating==="true"}static open(t,e){e.setAttribute("aria-expanded","true"),t.dataset.animating="true",t.classList.add("show"),r.prepareOpenStyles(t);let n=t.scrollHeight;t.style.height="0px",t.offsetHeight;let a=r.playOpenAnimation(t,n);a.onfinish=()=>{t.style.height="auto",t.style.overflow="visible",r.cleanAnimationStyles(t)},a.oncancel=()=>{r.cleanAnimationStyles(t)}}static close(t,e){t.dataset.animating="true";let n=t.scrollHeight;r.prepareCloseStyles(t,n);let a=r.playCloseAnimation(t,n);a.onfinish=()=>{t.style.height="0px",t.classList.remove("show"),e.setAttribute("aria-expanded","false"),r.cleanAnimationStyles(t)},a.oncancel=()=>{r.cleanAnimationStyles(t)}}static prepareOpenStyles(t){t.style.overflow="hidden",t.style.height="auto"}static prepareCloseStyles(t,e){t.style.overflow="hidden",t.style.height=`${e}px`}static playOpenAnimation(t,e){return t.animate([{height:"0px"},{height:`${e}px`}],{duration:300,easing:"ease"})}static playCloseAnimation(t,e){return t.animate([{height:`${e}px`},{height:"0px"}],{duration:300,easing:"ease"})}static cleanAnimationStyles(t){["height","overflow"].forEach(n=>t.style.removeProperty(n)),t.style.length===0&&t.removeAttribute("style"),delete t.dataset.animating}static getButton(t,e){let n=e.id;return n?t.querySelector(`[data-js="collapse"][data-target="#${n}"]`):null}};var p=class r{constructor(){r.init()}static init(){c.addEventToDocument("click",r.onClick)}static onClick(t){if(!(t instanceof MouseEvent))return;let e=t.target;e&&(r.handleSwitch(e)||r.handleClose(e)||r.handleOpen(e))}static handleSwitch(t){if(!t.matches('.close[data-js="dialog"][data-target]'))return!1;let e=t.getAttribute("data-target");if(!e)return!0;let n=document.querySelector(e);if(!(n instanceof HTMLDialogElement))return!0;let a=t.closest("dialog");return a&&a!==n?(a.addEventListener("transitionend",()=>r.open(n),{once:!0}),r.close(a),!0):(n.open||r.open(n),!0)}static handleClose(t){if(!t.matches(".close")||t.matches('[data-js="dialog"]'))return!1;let e=t.closest("dialog");return e&&r.close(e),!0}static handleOpen(t){if(!t.matches('[data-js="dialog"][data-target]')||t.matches(".close"))return!1;let e=t.getAttribute("data-target");if(!e)return!0;let n=document.querySelector(e);return n instanceof HTMLDialogElement&&(n.open||r.open(n)),!0}static open(t){r.emitEvent(t,"dialog:beforeOpen",t),t.showModal(),t.classList.add("show"),r.emitEvent(t,"dialog:afterOpen",t)}static close(t){r.emitEvent(t,"dialog:beforeClose",t),t.classList.remove("show"),t.addEventListener("transitionend",()=>{t.close()},{once:!0}),r.emitEvent(t,"dialog:afterClose",t)}static emitEvent(t,e,n){t.dispatchEvent(new CustomEvent(e,{detail:{element:n},bubbles:!0}))}};var v=class r{constructor(){r.init()}static init(){c.addEventToDocument("click",r.onClick)}static onClick(t){if(!(t instanceof MouseEvent))return;let e=t.target;if(e){if(e.matches('[data-js="dropdown"][data-target]')){let n=e,a=n.getAttribute("data-target");if(!a)return;let s=document.querySelector(a);if(!s)return;r.closeAllDropdownsExcept(s),r.toggleDropdown(s,n);return}e.closest(".dropdown-body.show")||r.closeAllDropdowns()}}static toggleDropdown(t,e){r.isOpen(t)?r.closeDropdown(t,e):r.openDropdown(t,e)}static isOpen(t){return t.classList.contains("show")}static openDropdown(t,e){r.isOpen(t)||(t.style.display="block",t.offsetHeight,t.classList.add("show"),e.setAttribute("aria-expanded","true"))}static closeDropdown(t,e){if(!r.isOpen(t))return;t.classList.remove("show"),e.setAttribute("aria-expanded","false");let n=a=>{a.propertyName==="opacity"&&(t.style.display="none",t.removeEventListener("transitionend",n))};t.addEventListener("transitionend",n,{once:!0})}static closeAllDropdownsExcept(t){document.querySelectorAll(".dropdown-body.show").forEach(n=>{if(n!==t){let a=r.getButtonForDropdown(n);if(!a)return;r.closeDropdown(n,a)}})}static closeAllDropdowns(){document.querySelectorAll(".dropdown-body.show").forEach(e=>{let n=r.getButtonForDropdown(e);n&&r.closeDropdown(e,n)})}static getButtonForDropdown(t){let e=t.id;return e?document.querySelector(`[data-js="dropdown"][data-target="#${e}"]`):null}};var A=class r{constructor(){r.init()}static init(){c.addEventToDocument("submit",r.onSubmit)}static onSubmit(t){let e=t.target;if(!e)return;let n=e.closest("form");n&&n.matches('[data-js="validate"]')&&(n.checkValidity()||(t.preventDefault(),t.stopPropagation()),n.classList.add("validated"))}};var x=class r{constructor(){r.init()}static init(){c.addEventToDocument("click",r.onClick)}static onClick(t){if(!(t instanceof MouseEvent))return;let e=t.target;e&&r.handleTabClick(e)}static handleTabClick(t){if(!t.matches('[data-js="tab"][data-target]'))return;let e=t.parentElement;if(!e)return;let n=r.resolveContent(t);n&&(r.hideAll(e),r.clearActive(e),r.showOne(t,n))}static resolveContent(t){let e=t.getAttribute("data-target");if(!e)return null;let n=document.querySelector(e);return n instanceof HTMLElement?n:null}static hideAll(t){t.querySelectorAll('[data-js="tab"][data-target]').forEach(n=>{let a=r.resolveContent(n);a&&a.classList.remove("show")})}static clearActive(t){t.querySelectorAll('[data-js="tab"][data-target]').forEach(n=>{n.classList.remove("active"),n.setAttribute("aria-selected","false")})}static showOne(t,e){t.classList.add("active"),t.setAttribute("aria-selected","true"),e.classList.add("show")}};document.addEventListener("DOMContentLoaded",()=>{new f,new m,new h,new g,new p,new v,new A,new x});
